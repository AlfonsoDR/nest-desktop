<span id="simulation">
  <span class="simulation-theme">
    <mat-toolbar class="navbar content" color="primary">
      <ng-container *ngIf="data">
        <span class="title">
          <mat-form-field floatLabel="never">
            <input matInput type="text" class="formControl" [(ngModel)]="data.name" [disabled]="this._dataService.mode!='edit'" placeholder="Name of the simulation"/>
            <span *ngIf="this._dataService.mode=='edit'" matSuffix>
              <button mat-icon-button aria-label="Clear" (click)="data.name=''" class="button no-print">
                <fa-icon icon="times" [style.display]="data.name ? '' : 'none'"></fa-icon>
              </button>
            </span>
          </mat-form-field>
        </span>
        <span class="spacer"></span>
        <ng-container *ngIf="_dataService.mode=='run'">
          <button mat-icon-button (click)="toggleBottomSheet()" [class.active]="isBottomSheetOpened()">
            <fa-icon icon="shapes" rotate="90"></fa-icon>
          </button>
  			  <mat-divider class="style-fix" [vertical]="true"></mat-divider>
          <button mat-icon-button (click)="mode='network'" [class.active]="mode=='network'" matTooltip="Network configurations">
            <fa-icon icon="bezier-curve"></fa-icon>
          </button>
          <button mat-icon-button (click)="mode='simulation'" [class.active]="mode=='simulation'" matTooltip="Simulation configurations">
            <fa-icon icon="cogs"></fa-icon>
          </button>
          <button mat-icon-button (click)="mode='visualization'" [class.active]="mode=='visualization'" matTooltip="Chart configurations">
            <fa-icon icon="chart-line"></fa-icon>
          </button>
          <button mat-icon-button (click)="mode='stats'" [class.active]="mode=='stats'" matTooltip="Simulation stats">
            <fa-icon icon="poll"></fa-icon>
          </button>
        </ng-container>
			  <mat-divider class="style-fix" [vertical]="true"></mat-divider>
        <button mat-icon-button (click)="save()" matTooltip="Save the current network">
          <fa-icon icon="save"></fa-icon>
        </button>
        <button mat-icon-button (click)="details()" [class.active]="_dataService.mode=='details'">
          <fa-icon icon="eye"></fa-icon>
        </button>
        <button mat-icon-button (click)="edit()" [class.active]="_dataService.mode=='edit'">
          <fa-icon icon="pen"></fa-icon>
        </button>
        <button mat-icon-button (click)="run()" [class.active]="_dataService.mode=='run'">
          <fa-icon icon="play"></fa-icon>
        </button>
        <!-- <button mat-icon-button>
          <fa-icon icon="ellipsis-v"></fa-icon>
        </button> -->
      </ng-container>
    </mat-toolbar>
  </span>

  <ng-container [ngSwitch]="_dataService.mode">
    <ng-container *ngSwitchCase="'details'">
      <app-simulation-details [data]="data"></app-simulation-details>
    </ng-container>

    <ng-container *ngSwitchCase="'edit'">
      <app-network [data]="data" (networkChange)="onNetworkChange($event)"></app-network>
    </ng-container>

    <ng-container *ngSwitchCase="'run'">
      <mat-sidenav-container style="height:calc(100vh - 40px)">
        <mat-sidenav disableClose="true" id="controller" mode="side" opened="true" position="end" role="region" style="height:100vh">
          <app-controller [mode]="mode" [data]="data" [records]="records" (simulationChange)="onSimulationChange($event)" (appChange)="onAppChange($event)"></app-controller>
        </mat-sidenav>

        <mat-sidenav-content class="visualization-content">
          <ng-container *ngIf="records.length > 0 && data != undefined">
            <app-records-visualization [data]="data" [records]="records"></app-records-visualization>
          </ng-container>
        </mat-sidenav-content>

      </mat-sidenav-container>
    </ng-container>
  </ng-container>
</span>
